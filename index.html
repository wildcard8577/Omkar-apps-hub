<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Super Bird Pro + High Score</title>
    <style>
        body { margin: 0; overflow: hidden; background: #87CEEB; font-family: 'Arial', sans-serif; }
        canvas { display: block; margin: 0 auto; }
        #ui { 
            position: absolute; width: 100%; top: 20px; 
            display: flex; flex-direction: column; align-items: center;
            color: white; pointer-events: none; z-index: 10;
        }
        .score-text { font-size: 50px; font-weight: 900; text-shadow: 3px 3px 0px #000; }
        .high-score { font-size: 20px; font-weight: bold; text-shadow: 2px 2px 0px #000; color: #FFD700; }
    </style>
</head>
<body>
    <div id="ui">
        <div class="score-text" id="score">0</div>
        <div class="high-score" id="highScore">Best: 0</div>
    </div>
    <canvas id="gameCanvas"></canvas>

    <audio id="bgMusic" loop>
        <source src="https://www.bensound.com/bensound-music/bensound-relaxing.mp3" type="audio/mpeg">
    </audio>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const highScoreElement = document.getElementById('highScore');
        const bgMusic = document.getElementById('bgMusic');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // --- GAME CONFIG ---
        const GRAVITY = 0.3;
        const JUMP = -6;
        const PIPE_WIDTH = 75;
        const PIPE_GAP = 230; 
        const PIPE_DISTANCE = 350;

        let bird = { x: 70, y: canvas.height/2, radius: 20, velocity: 0 };
        let pipes = [];
        let score = 0;
        let highScore = localStorage.getItem('birdHighScore') || 0;
        let gameActive = true;
        let firstTap = true;

        highScoreElement.innerText = "Best: " + highScore;

        function createPipe() {
            let minH = 100;
            let maxH = canvas.height - PIPE_GAP - minH;
            let topHeight = Math.random() * (maxH - minH) + minH;
            pipes.push({ x: canvas.width, top: topHeight, passed: false });
        }

        function resetGame() {
            bird.y = canvas.height / 2;
            bird.velocity = 0;
            pipes = [];
            score = 0;
            scoreElement.innerText = "0";
            gameActive = true;
            createPipe();
        }

        const handleAction = (e) => {
            if (e.type === 'touchstart') e.preventDefault();
            
            // Start music on first tap
            if(firstTap) {
                bgMusic.play();
                firstTap = false;
            }

            if (!gameActive) {
                resetGame();
            } else {
                bird.velocity = JUMP;
            }
        };

        window.addEventListener('touchstart', handleAction, {passive: false});
        window.addEventListener('mousedown', handleAction);

        function update() {
            if (!gameActive) return;

            bird.velocity += GRAVITY;
            bird.y += bird.velocity;

            if (pipes.length === 0 || pipes[pipes.length - 1].x < canvas.width - PIPE_DISTANCE) {
                createPipe();
            }

            pipes.forEach((pipe, index) => {
                pipe.x -= 3.8; 

                if (bird.x + bird.radius - 5 > pipe.x && bird.x - bird.radius + 5 < pipe.x + PIPE_WIDTH) {
                    if (bird.y - bird.radius + 5 < pipe.top || bird.y + bird.radius - 5 > pipe.top + PIPE_GAP) {
                        endGame();
                    }
                }

                if (!pipe.passed && pipe.x < bird.x) {
                    score++;
                    pipe.passed = true;
                    scoreElement.innerText = score;
                }

                if (pipe.x + PIPE_WIDTH < 0) pipes.splice(index, 1);
            });

            if (bird.y + bird.radius > canvas.height || bird.y - bird.radius < 0) {
                endGame();
            }
        }

        function endGame() {
            gameActive = false;
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('birdHighScore', highScore);
                highScoreElement.innerText = "Best: " + highScore;
            }
        }

        function draw() {
            ctx.fillStyle = "#87CEEB";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Pipes
            pipes.forEach(pipe => {
                ctx.fillStyle = "#2ecc71";
                ctx.fillRect(pipe.x, 0, PIPE_WIDTH, pipe.top);
                ctx.fillRect(pipe.x, pipe.top + PIPE_GAP, PIPE_WIDTH, canvas.height);
                ctx.strokeStyle = "#1b5e20";
                ctx.lineWidth = 3;
                ctx.strokeRect(pipe.x, 0, PIPE_WIDTH, pipe.top);
                ctx.strokeRect(pipe.x, pipe.top + PIPE_GAP, PIPE_WIDTH, canvas.height);
            });

            // Bird
            ctx.save();
            ctx.translate(bird.x, bird.y);
            ctx.rotate(bird.velocity * 0.05);
            ctx.beginPath();
            ctx.arc(0, 0, bird.radius, 0, Math.PI * 2);
            ctx.fillStyle = "#FFD700";
            ctx.fill();
            ctx.stroke();
            // Eye
            ctx.beginPath(); ctx.arc(8, -6, 5, 0, Math.PI * 2); ctx.fillStyle = "white"; ctx.fill(); ctx.stroke();
            // Beak
            ctx.beginPath(); ctx.moveTo(15, 0); ctx.lineTo(25, 5); ctx.lineTo(15, 10); ctx.fillStyle = "orange"; ctx.fill(); ctx.stroke();
            ctx.restore();

            if (!gameActive) {
                ctx.fillStyle = "rgba(0,0,0,0.7)";
                ctx.fillRect(0,0, canvas.width, canvas.height);
                ctx.fillStyle = "white";
                ctx.textAlign = "center";
                ctx.font = "bold 30px Arial";
                ctx.fillText("OUT! SCORE: " + score, canvas.width/2, canvas.height/2);
                ctx.font = "20px Arial";
                ctx.fillText("TAP TO TRY AGAIN", canvas.width/2, canvas.height/2 + 50);
            }

            update();
            requestAnimationFrame(draw);
        }

        createPipe();
        draw();
    </script>
</body>
</html>
<!-- Existing body ke end me, canvas ke baad -->
<div style="position: fixed; bottom: 10px; width: 100%; text-align: center; font-weight: bold; color: white; text-shadow: 1px 1px 2px black; z-index: 10;">
    Made by Omkar
</div>